#!/usr/bin/perl -w

use Config;

my $output_file = shift;
my $input_file  = $output_file . ".in";

open my $input_fh, $input_file          or die "Can't open $input_file: $!";
open my $output_fh, ">$output_file"     or die "Can't open $output_file: $!";
print $output_fh <<"END";
/*
 * !!! DO NOT EDIT THIS FILE!!!
 * This file was generated from $input_file.
 * Edit that and rerun make to regenerate.
 */

END

while(<$input_fh>) {
    s{%%(.*)%%}{$Config{$1}}g;
    print $output_fh $_;
}
